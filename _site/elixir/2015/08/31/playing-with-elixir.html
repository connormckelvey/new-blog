<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Playing with Elixir - Connor McKelvey</title>
  <meta name="description" content="Well I did a crap job about keeping up with this blog. Almost 5 months have gone by… I haven’t been doing nothing, though. I have been refactoring a CLI fram...">
  
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="/css/main.css">
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,400italic|Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
  <link rel="canonical" href="http://www.connormckelvey.com/elixir/2015/08/31/playing-with-elixir.html">
  <link rel="alternate" type="application/rss+xml" title="Connor McKelvey" href="http://www.connormckelvey.com/feed.xml" />

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
  <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png" />

  <script src="/js/modernizr.js"></script>
</head>


  <body class="sub">

    <header class="banner" role="banner">
   <div class="banner__block">
       <h2><a href="/">Connor McKelvey</a></h2>
       <p>I am a front-end developer living in Denver, CO. I am obsessed with Javascript and I have a thing for accessibility. </p>
       <nav role="navigation">
          <ul class="inline-list">
            
              <li>
                <a
                  class="has-tooltip"
                  title="Github"
                  target="_blank"
                  href="https://github.com/connormckelvey">
                  <i class="fa fa-github"></i>
                  <span class="tooltip">Github</span>
                </a>
              </li>
            
              <li>
                <a
                  class="has-tooltip"
                  title="Twitter"
                  target="_blank"
                  href="https://twitter.com/cssaddict">
                  <i class="fa fa-twitter"></i>
                  <span class="tooltip">Twitter</span>
                </a>
              </li>
            
              <li>
                <a
                  class="has-tooltip"
                  title="Stack Overflow"
                  target="_blank"
                  href="http://stackoverflow.com/users/413173/connor-finn-mckelvey">
                  <i class="fa fa-stack-overflow"></i>
                  <span class="tooltip">Stack Overflow</span>
                </a>
              </li>
            
              <li>
                <a
                  class="has-tooltip"
                  title="Email Me"
                  target="_blank"
                  href="mailto:connormckelvey@gmail.com">
                  <i class="fa fa-envelope"></i>
                  <span class="tooltip">Email Me</span>
                </a>
              </li>
            
           </ul>
       </nav>
   </div>
</header>


      <main class="main" role="main">

        <div class="back-link">
	<div class="back-link__wrapper">
		<a href="/"><i class="fa fa-arrow-left"></i> Go Home</a>
	</div>
</div>
<article class="article hentry">
    <header class="article__header entry-header">
        <h1 class="article__title entry-title">
            Playing with Elixir
        </h1>
        <div class="article__meta entry-meta">
            <div class="article__date entry-date">
                    <time class="entry-date" datetime="2015-08-31 13:02:24 -0600">
                        Aug 31, 2015
                    </time>
            </div>
            <div class="vcard">
                <a class="url fn n" href="https://twitter.com/cssaddict" target="_blank" rel="author" title="Connor McKelvey's Twitter">Connor McKelvey</a>
            </div>
        </div><!-- .entry-meta -->
    </header><!-- .entry-header -->
    <div class="article__content entry-content">
        <p>Well I did a crap job about keeping up with this blog. Almost 5 months have gone by… I haven’t been doing nothing, though. I have been refactoring a CLI framework written in node that I started many months ago. But the past few days I have really been distracted by Elixir.</p>

<p>Im a complete n00b with functional programming so it has really been a major shift. But after a couple hours of messing around in <strong>iex</strong> and reading the docs I decided to dive right in.</p>

<p>I decided that I was going to attempt to copy all of the Array methods from <a href="http://underscorejs.org">Underscore.js</a> and create a Elixir module to be used with Lists. I am fully aware of the <strong>List</strong> module, but that’s not the point. I wanted to try to recreate the functionality in these methods using only basic Elixir code, pattern matching and a whole lot of recursion. Even though Elixir has <code>case</code>, <code>cond</code> and <code>if</code> I wanted to focus on pattern matching (the concept that pulled me into Elixir).</p>

<p>So far I have the first 4 Array methods from Underscore.js <code>first</code>, <code>initial</code>, <code>rest</code>, <code>compact</code> as well as two helper functions <code>reverse</code> and <code>length</code>. You can see my progress <a href="https://github.com/connormckelvey/learning-elixir">here</a> as I continue to add functions, a readme and some tests. I won’t go into all of these but I do want to go into the one I had the most difficulty with: <code>initial</code>. And Hey! I’ve only been messing with Elixir (and FP) for 3 days, so thats allowed. Feel free to stop reading this post now.</p>

<h3 id="linked-lists">Linked Lists</h3>
<p>Coming from a Javascript background I think of Arrays when I think of linked lists (even though I should think of tuples ). Lists in FP are similar to Arrays in Object Oriented languages, in that they are well… lists with multiple values. However Arrays in Javascript, for example, are still Objects, and they inherit the Array prototype, so you get all sorts of helpful properties and methods that make manipulating the array and retrieving information about the array much easier.</p>

<p>You don’t get that in Elixir or really any other functional programming language. You can use the List module that comes with Elixir, but that’s no good for learning functional programming.</p>

<p>A linked list is basically a value taking up a chunk of memory, pointing to the next value taking up a chunk of memory, pointing to the next chunk of memory, until the last value does’t point anywhere else. So when you have a list, you really only know what the first element (also known as head) of the list is. Keep that in mind as I review the <code>initial</code> function.</p>

<h3 id="intial">Intial</h3>

<p>If you are not familiar with the <code>initial</code> method in Underscores, here is the definition:</p>

<p><em>Returns everything but the last entry of the list. Passing <strong>n</strong> will
  return all the values in the list, excluding the last N.</em></p>

<p>Ok. Onward.</p>

<p>The first two functions are the public functions of my Underscore module</p>

<div class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="kd">def</span> <span class="n">initial</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">do_initial</span> <span class="n">list</span><span class="p">,</span> <span class="n">n</span>
<span class="k">end</span>

<span class="kd">def</span> <span class="n">initial</span><span class="p">(</span><span class="n">list</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">do_initial</span> <span class="n">list</span>
<span class="k">end</span></code></pre></div>

<p>Notice how they bot have the same name. In Elixir the first function is actually called <code>initial/2</code> and the second is called <code>initial/1</code>, where the appropriate function is called depending on the number of arguments being passed in. I’ll take this simplicity over an <code>if/else</code> block any day.</p>

<p>To test my function I open <strong>iex</strong> and run <code>iex&gt; Underscore.initial([1,2,3,4,5])</code>. (And because I am an amazing developer, it returns <em>1</em>.)  Before <em>1</em> is returned, <code>initial</code> takes the input and passes it on to the <code>do_initial</code> private functions (notice <code>defp</code>).</p>

<div class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="kd">defp</span> <span class="n">do_initial</span><span class="p">([])</span> <span class="k">do</span>
  <span class="no">nil</span>
<span class="k">end</span>

<span class="kd">defp</span> <span class="n">do_initial</span><span class="p">(</span><span class="n">list</span><span class="p">)</span> <span class="k">do</span>
  <span class="p">[</span><span class="n">head</span> <span class="p">|</span> <span class="n">tail</span><span class="p">]</span> <span class="p">=</span> <span class="n">reverse</span> <span class="n">list</span>
  <span class="n">reverse</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
<span class="k">end</span></code></pre></div>

<p>But wait, there are two functions now with the same name, and same arity. This is where pattern matching really comes into play. All Elixir wants is peace and balance, so from many aspects of that language it is just try to match patterns to attain that balance. The first function listed does only take one argument but pattern matching allows us to check for an empty list. So the list will only be passed in if its empty.</p>

<p>So upon calling <code>Underscore.initial([1,2,3,4,5])</code> the list gets passed to:</p>

<div class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="kd">defp</span> <span class="n">do_initial</span><span class="p">(</span><span class="n">list</span><span class="p">)</span> <span class="k">do</span>
  <span class="p">[</span><span class="n">head</span> <span class="p">|</span> <span class="n">tail</span><span class="p">]</span> <span class="p">=</span> <span class="n">reverse</span> <span class="n">list</span>
  <span class="n">reverse</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
<span class="k">end</span></code></pre></div>

<p>Two new variables are created inside the function, <code>head</code> and <code>tail</code> which are then equated to the list after it has been passed through the <code>reverse</code> function. As I said earlier, Elixir only knows the first element of a List, and in <code>initial</code> we want a new list with some stuff knocked off the end. That in addition to the fact that Elixir wants to balance the equation <code>[head|tail] = [5,4,3,2,1]</code>, the only outcome could be <code>head</code> which would be return to <code>5</code> and <code>tail</code> which would return <code>[4,3,2,1]</code>, the remainder of the list. I then reverse <code>tail</code> in order to return a new list where the last element has been removed: <code>[1,2,3,4]</code>.</p>

<p>I also added the <code>initial/1</code> function with a condition to catch empty lists. Elixir throws and error when you try to get the head or tail of an empty list so I decided to return a falsey value, in this case <code>nil</code>.</p>

<div class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="kd">defp</span> <span class="n">do_initial</span><span class="p">([])</span> <span class="k">do</span>
  <span class="no">nil</span>
<span class="k">end</span></code></pre></div>

<p>In the case that we wanted to get a new copy of the list without the last <strong>n</strong> elements we would call: <code>Underscore.initial([1,2,3,4,5], 2)</code>. And yet again do to my special set of skills, we get <code>[1,2,3]</code>.</p>

<p>The <code>initial/2</code> function passes on <code>list</code> and <code>n</code> to:</p>

<div class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="kd">defp</span> <span class="n">do_initial</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">do</span>
  <span class="p">[</span><span class="n">head</span> <span class="p">|</span> <span class="n">tail</span><span class="p">]</span> <span class="p">=</span> <span class="n">reverse</span> <span class="n">list</span>
  <span class="n">do_initial</span> <span class="n">reverse</span><span class="p">(</span><span class="n">tail</span><span class="p">),</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span>
<span class="k">end</span></code></pre></div>

<p>Hear, <code>head</code> and <code>tail</code> are created from the reversed list and then <code>do_initial</code> calls itself passing in reversed tail and a number 1 less than <code>n</code>. This will continue until some other pattern is matched. <code>head</code> and <code>tail</code> are created from the new, shorter, reversed list and then <code>do_initial</code> calls itself again.</p>

<p>Because this function is recursive we need function that will stop the recursion and return the value we actually want.</p>

<div class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="kd">defp</span> <span class="n">do_initial</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">list</span>
<span class="k">end</span></code></pre></div>

<p>When the second parameter is equal to zero, <code>do_inital/2</code> returns our new list that is missing the last <strong>n</strong> elements.</p>

<p>Success!</p>

    </div><!-- .entry-content -->
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'connormckelvey';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <footer class="article__footer entry-meta">

    </footer>
</article>

        
      </main>

    <footer class="footer">
	Copyright &copy; <script>document.write(new Date().getFullYear())</script> Connor McKelvey
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-31478269-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>

</html>
